<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stage1_Week1_Assignment</title>
    <link rel="stylesheet" href="assignment_week3.css"/>
</head>

<body>
    <script>

document.addEventListener('DOMContentLoaded', function() {
    function getData() {
        fetch("https://padax.github.io/taipei-day-trip-resources/taipei-attractions-assignment-1")
            .then(function(response) {
                return response.json();
            })
            .then(function(data) {
                if (data && data.data && data.data.results) {
                    let results = data.data.results;
                    console.log(results);

                    // 處理前三個結果
                    results.slice(0, 3).forEach(function(item, index) {
                        let stitle = item.stitle;
                        let firstImageUrl = "";

                        // 確保 item.filelist 存在且格式正確
                        if (item.filelist && typeof item.filelist === "string") {
                            // 正則表達式從 filelist 中提取第一張圖片的 URL
                            let match = item.filelist.match(/https?:\/\/\S+?\.(jpg|jpeg|png|gif)/i);
                            if (match) {
                                firstImageUrl = match[0];  // 提取圖片網址
                            }
                        }

                        // 如果未找到圖片，使用占位圖片
                        if (!firstImageUrl) {
                            firstImageUrl = 'https://via.placeholder.com/150';  // 使用占位圖片
                        }

                        // 更新圖片和標題
                        let imgElement = document.querySelector(`.pro-con-${index + 1} img`);
                        let titleElement = document.querySelector(`.pro-con-${index + 1} .promotion-text`);

                        if (imgElement) {
                            imgElement.src = firstImageUrl;
                        }

                        if (titleElement) {
                            titleElement.textContent = stitle;
                        }
                    });

                    // 處理其他結果，創建卡片
                    results.slice(3).forEach(function(item, index) {
                        let stitle = item.stitle || "No Title Available";
                        let firstImageUrl = 'https://via.placeholder.com/150';  // 使用占位圖片

                        // 確保 item.filelist 存在且格式正確
                        if (item.filelist && typeof item.filelist === "string") {
                            let match = item.filelist.match(/https?:\/\/\S+?\.(jpg|jpeg|png|gif)/i);
                            if (match) {
                                firstImageUrl = match[0];
                            }
                        }

                        // 動態創建卡片
                        createCard(index + 1, firstImageUrl, stitle);
                    });
                } else {
                    console.error('Data structure is incorrect or missing "results".');
                }
            })
            .catch(function(error) {
                console.error('Error:', error);
            });
    }

    function createCard(index, imageUrl, title) {
        let gridContainer = document.querySelector('.row-grid');

        let cardElement = document.createElement('div');
        cardElement.classList.add('card', `title${index}`);

        let imageContainer = document.createElement('div');
        imageContainer.classList.add('image-container');

        let imgElement = document.createElement('img');
        imgElement.classList.add('image');
        imgElement.src = imageUrl;

        let starElement = document.createElement('img');
        starElement.classList.add('star');
        starElement.src = './image/star.png';

        let titleElement = document.createElement('div');
        titleElement.classList.add('card-title');
        titleElement.textContent = title;

        imageContainer.appendChild(imgElement);
        imageContainer.appendChild(starElement);
        cardElement.appendChild(imageContainer);
        cardElement.appendChild(titleElement);

        gridContainer.appendChild(cardElement);
    }

    getData();
});











        document.addEventListener("DOMContentLoaded", function() {
            const menuButton = document.querySelector(".menu");
            const closeButton = document.querySelector(".close");
            const asideMenu = document.querySelector(".aside-menu");

            menuButton.addEventListener("click", function() {
                asideMenu.classList.toggle("active");
            });

            closeButton.addEventListener("click", function() {
                asideMenu.classList.remove("active");
            });
        });



    </script>




    <nav>
        <!-- 左側導覽區 -->
        <div class="left-nav">My Website</div>
        <!-- 右側導覽區 -->
        <div class="right-nav ">
            <div>Item 1</div>
            <div>Item 2</div>
            <div>Item 3</div>
            <div>Item 4</div>
        </div>
        <img class="menu" src="./image/burger-menu.png" ></img>
    </nav>

    <div class="aside-menu">
        <img class="close" src="./image/close.png"/>
        <div class="aside-item">Item 1</div>
        <div class="aside-item">Item 2</div>
        <div class="aside-item">Item 3</div>
        <div class="aside-item">Item 4</div>
    </div>

    <!-- 主內容區 -->
    <div class="title">
        <div class="text">Welcome to MyHome</div>
    </div>

    <div class="image-content">
            <div class="promotion">
                <div class="pro-con-1" style="display: flex;">
                    <img></img>
                    <div class="promotion-text middle-screen1"></div>
                </div>
                <div class="pro-con-2" style="display: flex;">
                    <img></img>
                    <div class="promotion-text middle-screen2"></div>
                </div>
                <div class="pro-con-3" style="display: flex;">
                    <img></img>
                    <div class="promotion-text middle-screen3"></div>
                </div>
            </div>

                <div class="row-grid"></div>
                <div class="btn">Load More</div>
    </div>




</body>
</html>
