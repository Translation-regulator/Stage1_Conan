<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stage1_Week1_Assignment</title>
    <link rel="stylesheet" href="assignment_week3.css"/>
</head>

<body>
    <script>

document.addEventListener('DOMContentLoaded', function() {
    function getData() {
        fetch("https://padax.github.io/taipei-day-trip-resources/taipei-attractions-assignment-1")
            .then(function(response) {
                return response.json();
            })
            .then(function(data) {
                let results = data.data.results;  // 取得所有結果
                console.log(results)
                // 處理前三個元素
                results.slice(0, 3).forEach(function(item, index) {
                    let stitle = item.stitle;
                    let firstImageUrl = item.filelist.match(/https?:\/\/\S+?\.(jpg)/)[0];  // 取得第一張圖片

                    // 直接替換前三個的圖片和標題
                    let imgElement = document.querySelector(`.pro-con-${index + 1} img`);
                    let titleElement = document.querySelector(`.pro-con-${index + 1} .promotion-text`);

                    // 替換圖片和標題
                    if (imgElement) {
                        imgElement.src = firstImageUrl;
                    }

                    if (titleElement) {
                        titleElement.textContent = stitle;
                    }
                });

                results.slice(3).forEach(function(item, index) {
                let stitle = item.stitle || "No Title Available";  // 預設標題
                let firstImageUrlMatch = item.filelist.match(/https?:\/\/\S+?\.(jpg|jpeg|png|gif)/i);
                let firstImageUrl = firstImageUrlMatch ? firstImageUrlMatch[0] : 'default.jpg';  // 預設圖片

                // 使用更通用的選擇器，確保選擇正確的卡片
                let cardElement = document.querySelector(`.title${index + 1}`);  // title1 開始，對應 slice(3)
                if (cardElement) {
                    cardElement.style.backgroundImage = `url(${firstImageUrl})`;

                    // 使用 createElement 來加入標題元素
                    let titleElement = cardElement.querySelector('.card-title');
                    if (!titleElement) {
                        titleElement = document.createElement('div');
                        titleElement.classList.add('card-title');
                        cardElement.appendChild(titleElement);
                    }

                    titleElement.textContent = stitle;
                }
            });


                document.querySelectorAll('.card-title').forEach(function (element) {
                    let text = element.textContent;
                    if (text.length > 7) {
                        element.textContent = text.slice(0, 7) + '...';  // 刪除多於6個字符的部分，並添加 '...'
                    }
                });
            })
            .catch(function(error) {
                console.error('Error:', error);
            });
    }

    getData();
});



        document.addEventListener("DOMContentLoaded", function() {
            const menuButton = document.querySelector(".menu");
            const closeButton = document.querySelector(".close");
            const asideMenu = document.querySelector(".aside-menu");

            menuButton.addEventListener("click", function() {
                asideMenu.classList.toggle("active");
            });

            closeButton.addEventListener("click", function() {
                asideMenu.classList.remove("active");
            });
        });



    </script>




    <nav>
        <!-- 左側導覽區 -->
        <div class="left-nav">My Website</div>
        <!-- 右側導覽區 -->
        <div class="right-nav ">
            <div>Item 1</div>
            <div>Item 2</div>
            <div>Item 3</div>
            <div>Item 4</div>
        </div>
        <img class="menu" src="./image/burger-menu.png" ></img>
    </nav>

    <div class="aside-menu">
        <img class="close" src="./image/close.png"/>
        <div class="aside-item">Item 1</div>
        <div class="aside-item">Item 2</div>
        <div class="aside-item">Item 3</div>
        <div class="aside-item">Item 4</div>
    </div>

    <!-- 主內容區 -->
    <div class="title">
        <div class="text">Welcome to MyHome</div>
    </div>

    <div class="image-content">
            <div class="promotion">
                <div class="pro-con-1" style="display: flex;">
                    <img style="width: 80px; height: 50px;"></img>
                    <div class="promotion-text middle-screen1">Promotion 1</div>
                </div>
                <div class="pro-con-2" style="display: flex;">
                    <img style="width: 80px; height: 50px;"></img>
                    <div class="promotion-text middle-screen2">Promotion 2</div>
                </div>
                <div class="pro-con-3" style="display: flex;">
                    <img style="width: 80px; height: 50px;"></img>
                    <div class="promotion-text middle-screen3">Promotion 3</div>
                </div>
            </div>

                <div class="row-grid">
                    <div class="card title1 ">
                        <div class="image-container ">
                            <img class="big-image"></img>

                            <img class="star" src="./image/star.png"></img>

                            <div class="card-title">Title 1</div>
                        </div>
                    </div>

                    <div class="card title2">
                        <div class="image-container">
                            <img class="small-image" ></img>
                            <img class="star" src="./image/star.png"></img>
                        </div>
                        <div class="card-title">Title 2</div>
                    </div>

                    <div class="card title3">
                        <div class="image-container">
                            <img class="small-image"></img>
                            <img class="star" src="./image/star.png"></img>
                        </div>
                        <div class="card-title">Title 3</div>
                    </div>

                    <div class="card title4">
                        <div class="image-container">
                            <img class="small-image"></img>
                            <img class="star" src="./image/star.png"></img>
                        </div>
                        <div class="card-title">Title 4</div>
                    </div>

                    <div class="card title5">
                        <div class="image-container">
                            <img class="small-image"></img>
                            <img class="star" src="./image/star.png"></img>
                        </div>
                        <div class="card-title">Title 5</div>
                    </div>

                    <div class="card title6">
                        <div class="image-container">
                            <img class="big-image"></img>
                            <img class="star" src="./image/star.png"></img>
                        </div>
                        <div class="card-title">Title 6</div>
                    </div>

                    <div class="card title7">
                        <div class="image-container">
                            <img class="small-image"></img>
                            <img class="star" src="./image/star.png"></img>
                        </div>
                        <div class="card-title">Title 7</div>
                    </div>

                    <div class="card title8">
                        <div class="image-container">
                            <img class="small-image"></img>
                            <img class="star" src="./image/star.png"></img>
                        </div>
                        <div class="card-title">Title 8</div>
                    </div>

                    <div class="card title9">
                        <div class="image-container">
                            <img class="small-image"></img>
                            <img class="star" src="./image/star.png"></img>
                        </div>
                        <div class="card-title">Title 9</div>
                    </div>

                    <div class="card title10">
                        <div class="image-container">
                            <img class="small-image"></img>
                            <img class="star" src="./image/star.png"></img>
                        </div>
                        <div class="card-title">Title 10</div>
                    </div>
                </div>

    </div>



</body>
</html>
